<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Project] Exploring Robot" /><meta name="author" content="Faris Hijazi" /><meta property="og:locale" content="en" /><meta name="description" content="Instructions" /><meta property="og:description" content="Instructions" /><link rel="canonical" href="https://farishijazi.github.io/posts/exploring-robot/" /><meta property="og:url" content="https://farishijazi.github.io/posts/exploring-robot/" /><meta property="og:site_name" content="FarisHijazi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-12-06T00:00:00-08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Project] Exploring Robot" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Faris Hijazi"},"dateModified":"2023-07-20T23:36:01-07:00","datePublished":"2018-12-06T00:00:00-08:00","description":"Instructions","headline":"[Project] Exploring Robot","mainEntityOfPage":{"@type":"WebPage","@id":"https://farishijazi.github.io/posts/exploring-robot/"},"url":"https://farishijazi.github.io/posts/exploring-robot/"}</script><title>[Project] Exploring Robot | FarisHijazi</title><link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png" /><link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png" /><link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png" /><link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png" /><link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png" /><link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png" /><link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png" /><link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png" /><link rel="icon" type="image/png" href="favicon-196x196.png" sizes="196x196" /><link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" /><link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" /><link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" /><link rel="icon" type="image/png" href="favicon-128.png" sizes="128x128" /><meta name="application-name" content="&nbsp;"/><meta name="msapplication-TileColor" content="#FFFFFF" /><meta name="msapplication-TileImage" content="mstile-144x144.png" /><meta name="msapplication-square70x70logo" content="mstile-70x70.png" /><meta name="msapplication-square150x150logo" content="mstile-150x150.png" /><meta name="msapplication-wide310x150logo" content="mstile-310x150.png" /><meta name="msapplication-square310x310logo" content="mstile-310x310.png" /><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"> <script src="https://cdn.jsdelivr.net/combine/npm/katex@0.15.3/dist/katex.min.js,npm/pseudocode@latest/build/pseudocode.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2440352_86vrobdp9vu.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2451185_tgvgeuen2lh.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@5.2/distr/fira_code.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">FarisHijazi</a></div><div class="site-subtitle font-italic">thinking out loud</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="iconfont icon-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="iconfont icon-qzone ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="iconfont icon-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="iconfont icon-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="iconfont icon-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="bi bi-person-lines-fill ml-xl-3 mr-xl-3 unloaded"></i> <span>REACH OUT</span> </a><li class="nav-item"> <a href="/lists/" class="nav-link"> <i class="bi bi-list-columns-reverse ml-xl-3 mr-xl-3 unloaded"></i> <span>LISTS</span> </a><li class="nav-item"> <a href="/now/" class="nav-link"> <i class="bi bi-cone-striped ml-xl-3 mr-xl-3 unloaded"></i> <span>NOW</span> </a><li class="nav-item"> <a href="/setup/" class="nav-link"> <i class="bi bi-display ml-xl-3 mr-xl-3 unloaded"></i> <span>SETUP</span> </a><li class="nav-item"> <a href="/stack/" class="nav-link"> <i class="bi bi-stack ml-xl-3 mr-xl-3 unloaded"></i> <span>STACK</span> </a><li class="nav-item"> <a href="/subdomains/" class="nav-link"> <i class="iconfont icon-buywebhostingstep1domain ml-xl-3 mr-xl-3 unloaded"></i> <span>SUBDOMAINS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="iconfont icon-adjust1"></i> </button> <span class="icon-border"><br></span> <a href="https://github.com/FarisHijazi" aria-label="github" target="_blank" rel="noopener"> <i class="iconfont icon-github"></i> </a> <a href="https://linkedin.com/in/theeFaris" aria-label="linkedin" target="_blank" rel="noopener"> <i><svg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' style="margin-bottom: 5px"><path fill='currentColor' d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"/> </svg> </i> </a> <a href="https://notion.FarisHijazi.com" aria-label="notion" > <i><svg xmlns='http://www.w3.org/2000/svg' width='1.5em' height='1.5em' preserveAspectRatio='xMidYMid meet' viewBox='12 0.18999999999999906 487.619 510.941'> <g><path fill='currentColor' d="M96.085 91.118c15.81 12.845 21.741 11.865 51.43 9.884l279.888-16.806c5.936 0 1-5.922-.98-6.906L379.94 43.686c-8.907-6.915-20.773-14.834-43.516-12.853L65.408 50.6c-9.884.98-11.858 5.922-7.922 9.883zm16.804 65.228v294.491c0 15.827 7.909 21.748 25.71 20.769l307.597-17.799c17.81-.979 19.794-11.865 19.794-24.722V136.57c0-12.836-4.938-19.758-15.84-18.77l-321.442 18.77c-11.863.997-15.82 6.931-15.82 19.776zm303.659 15.797c1.972 8.903 0 17.798-8.92 18.799l-14.82 2.953v217.412c-12.868 6.916-24.734 10.87-34.622 10.87-15.831 0-19.796-4.945-31.654-19.76l-96.944-152.19v147.248l30.677 6.922s0 17.78-24.75 17.78l-68.23 3.958c-1.982-3.958 0-13.832 6.921-15.81l17.805-4.935V210.7l-24.721-1.981c-1.983-8.903 2.955-21.74 16.812-22.736l73.195-4.934 100.889 154.171V198.836l-25.723-2.952c-1.974-10.884 5.927-18.787 15.819-19.767zM42.653 23.919l281.9-20.76c34.618-2.969 43.525-.98 65.283 14.825l89.986 63.247c14.848 10.876 19.797 13.837 19.797 25.693v346.883c0 21.74-7.92 34.597-35.608 36.564L136.64 510.14c-20.785.991-30.677-1.971-41.562-15.815l-66.267-85.978C16.938 392.52 12 380.68 12 366.828V58.495c0-17.778 7.922-32.608 30.653-34.576z" fill-rule="evenodd"/> </g> </svg> </i> </a> <a href="https://goodreads.com/FarisHijazi" aria-label="goodreads" > <i><svg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24'><path fill='currentColor' d="M19.525 15.977V.49h-2.059v2.906h-.064c-.211-.455-.481-.891-.842-1.307-.36-.412-.767-.777-1.232-1.094-.466-.314-.962-.561-1.519-.736C13.256.09 12.669 0 12.038 0c-1.21 0-2.3.225-3.246.67-.947.447-1.743 1.057-2.385 1.83-.642.773-1.133 1.676-1.47 2.711-.336 1.037-.506 2.129-.506 3.283 0 1.199.141 2.326.425 3.382.286 1.057.737 1.976 1.368 2.762.631.78 1.412 1.397 2.375 1.833.961.436 2.119.661 3.471.661 1.248 0 2.33-.315 3.262-.946s1.638-1.473 2.119-2.525h.061v2.284c0 2.044-.421 3.607-1.264 4.705-.84 1.081-2.224 1.638-4.146 1.638-.572 0-1.128-.061-1.669-.181-.542-.12-1.036-.315-1.487-.57-.437-.271-.827-.601-1.143-1.038-.316-.435-.526-.961-.632-1.593H5.064c.067.887.315 1.654.737 2.3.424.646.961 1.172 1.602 1.593.641.406 1.367.706 2.172.902.811.194 1.639.3 2.494.3 1.383 0 2.541-.195 3.486-.555.947-.376 1.714-.902 2.301-1.608.601-.708 1.021-1.549 1.293-2.556.27-1.007.42-2.134.42-3.367l-.044.062zm-7.484-.557c-.955 0-1.784-.189-2.479-.571-.697-.38-1.277-.882-1.732-1.503-.467-.621-.797-1.332-1.022-2.139s-.332-1.633-.332-2.484c0-.871.105-1.725.301-2.563.21-.84.54-1.587.992-2.24.451-.652 1.037-1.182 1.728-1.584s1.533-.605 2.51-.605 1.803.209 2.495.621c.676.415 1.247.959 1.683 1.634.436.677.751 1.429.947 2.255.195.826.285 1.656.285 2.482 0 .852-.12 1.678-.345 2.484-.226.807-.572 1.518-1.038 2.139-.465.621-1.021 1.123-1.698 1.503-.676.382-1.458.571-2.359.571h.064z"/> </svg> </i> </a> <a href=" javascript:location.href = 'mailto:' + ['theefaris','gmail.com'].join('@')" aria-label="email" > <i class="iconfont icon-mail"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="iconfont icon-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Project] Exploring Robot</span> </span> <i id="sidebar-trigger" class="iconfont icon-bars"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="iconfont icon-search"></i> <span id="search-wrapper" class="align-items-center"> <i class="iconfont icon-search"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Project] Exploring Robot</h1><div class="post-meta text-muted"><div> By <em> <a href="https://FarisHijazi.github.io/">Faris Hijazi</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1544083200" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2018-12-06 </em> </span> <span> Updated <em class="timeago" data-ts="1689921361" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-07-21 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1706 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><h2 id="instructions"><span class="mr-2">Instructions</span><a href="#instructions" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2></h2><ul><li>Code A*<li>Download world.csvPreview the document<li>Write a program to create a 4-connected graph and run an A* search from vertex (0,0) to vertex (19,19) across the obstacle map provided in world.csv.<li>The world is a 20×20 grid of cells<li>The world.csv file is an occupancy grid map: 1 means the grid cell is occupied and you can’t move through it<li>Edge costs are 1<li>Your code should output the final path (either plot it or print out the vertex coordinates) and associated path cost.<li>Comment your code to demonstrate that you understand the algorithm.<li>What to turn in:<ul><li>A zip file of your commented A* code including world.csv.<li>A cover sheet (PDF) listing:<li>Web sites you used<li>People you worked with<li>The final path<li>Your heuristic function (in English)<li>How you implemented the graph and priority queue<li>Any known bugs/issues</ul></ul><p>A few notes:</p><ul><li>4-connected means that you can travel from a cell to any of the cardinal neighbors (north, south, east, west).<li>Broadly speaking, there are two ways you can represent the graph<li>As an adjacency matrix with a function that returns valid neighbors for a given vertex when queried, or<li>As a list of vertices and a list of edges.<li>You need to demonstrate that you understand how the algorithm works and the best way to do this is to comment relevant lines of code. Marks will be awarded accordingly.<li>There are plenty of resources are available to you online, you may take inspiration from existing implementations that you find, but see Note 3 above.</ul><h2 id="rubric-and-grade"><span class="mr-2">Rubric and Grade</span><a href="#rubric-and-grade" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2></h2><div class="table-wrapper"><table class="stand-alone-table" id="table-1"><thead><tr><th>Criteria<th>Ratings<th> <th>Pts<tbody><tr><td>Sends waypoints to the robot<td>3.0 pts Full Marks<td>0.0 pts No Marks<td>3.0<tr><td>Uses SLAM to create a map<td>3.0 pts Full Marks<td>0.0 pts No Marks<td>3.0<tr><td>Has a documented exploration strategy<td>7.0 pts Full Marks<td>0.0 pts No Marks<td>7.0<tr><td>Strategy works in all world files (entire space visited)<td>7.0 pts Full Marks<td>0.0 pts No Marks<td>7.0<tr><td>Mechanism for detecting unexplored area<td>5.0 pts Full Marks<td>0.0 pts No Marks<td>5.0<tr><td>Mechanism for detecting when exploration strategy fails Failure case: didn’t get to way point, what do you do next?<td>7.0 pts Full Marks<td>0.0 pts No Marks<td>7.0<tr><td>Algorithm/strategy for getting to unexplored area<td>3.0 pts Full Marks<td>0.0 pts No Marks<td>3.0<tr><td>Behaves “reasonably” on other test worlds Doesn’t crash, makes some attempt to navigate to unexplored areas<td>5.0 pts Full Marks<td>0.0 pts No Marks<td>5.0<tr><td>Total Points:<td> <td> <td>40.0</table></div><script type="text/javascript"> var table = document.getElementById("table-1").createCaption(); table.innerHTML = "<strong>Table 1:</strong> Rubric and Grade"; table.style = "text-align:center" </script><h2 id="report"><span class="mr-2">Report</span><a href="#report" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2></h2><h3 id="discussion-of-the-exploration-problem"><span class="mr-2">Discussion of the exploration problem</span><a href="#discussion-of-the-exploration-problem" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3></h3><p>In this problem we are designing an exploration package utilizing the gmapping and nav_bundle packages to allow a simulated robot to explore an unknown environment. Our algorithm will have to set waypoints to move our robot towards the unexplored areas while avoiding obstacles. The robot should be reasonably robust to noisy odometry and mapping data, and it should be able to recognize when waypoints cannot be reached.</p><h3 id="discussion-of-your-gmapping-and-nav_bundle-package-implementations"><span class="mr-2">Discussion of your gmapping and nav_bundle package implementations</span><a href="#discussion-of-your-gmapping-and-nav_bundle-package-implementations" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3></h3><p>From the gmapping bundle we are only using the occupancy grid. This grid is used to find “frontier” points (points between explored and unexplored areas). We are also reading the map meta data which gives us the resolution of the occupancy grid in meters/pixel. This gives us the ability to transform the occupancy grid data into Cartesian coordinates. The map is also saved when a waypoint is generated and used to verify that the robot is staying in known areas only, ensuring that the robot doesn’t run into walls even if it didn’t know about them before it calculated it’s path.</p><p>From the nav_bundle package, we are using the waypoint commands: twist, base_link_goal, path_reset, move_base_cancel, and ready_pub. Clear and cancel are used to have the robot only pursue a single waypoint at a time. Waypoints generated using the occupancy grid which are then translated and rotated into the robot’s local coordinate system then set as a waypoint using Twist.</p><h3 id="discussion-of-your-waypoint-allocation-algorithm"><span class="mr-2">Discussion of your waypoint allocation algorithm</span><a href="#discussion-of-your-waypoint-allocation-algorithm" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3></h3><p>Waypoints are generated procedurally using an 61x61 filter that scans the frontier points on the occupancy grid. The robot’s exploration policy defines frontier points as being known unoccupied locations where the robot would end near unknown locations. This filter only selects points that are centered on an explored point, have no obstacles within a specified distance from the center, have a threshold percentage of unexplored cells, and aren’t where the robot has been before. These cells are then weighted by the percentage of unknown cells and euclidean distance from the robot. It then uses an A* algorithm to determine if there is a known path from the current location to the candidate location. Validating the path allows the robot to exclude candidate points that would be outside of the map or within obstacles.</p><p>If the robot enters a region that was unexplored when the waypoint was <em>created</em>, it will clear the waypoint queue, cancel the current waypoint, turn 360 degrees, back up 1.5m, and generate a new waypoint. With the current implementation of the nav_bundle, the robot can select paths that pass through unknown locations. If the robot then passes though the unknown location and discovers that there is a wall blocking the path, the robot will not reroute in order to find the proper path. Instead, the robot will simply crash into the wall. To prevent incorrect path planning through unknown locations, we save how the map looked when the nav_bundle chose that path, and tell the robot to stop and reroute if we reach a location that was previously unknown, making our robot’s path robust to new information.</p><pre id="read-1" style="display:none;">
    
\begin{algorithm}
\caption{FindNextWaypoint}
\begin{algorithmic}
\Procedure{FindNextWaypoint}{$map$, $window\_size$, $stride\_length$, $visited\_locations$, $robot\_loc$, $avoidance\_radius$, $empty\_radius$, $RESOLUTION$}

\State $potential\_candidates \gets \text{[]}$

\For{\textbf{every} $center\_cell \textbf{ in } map \textbf{ that is greater than } stride\_length$ \textbf{apart from each other}}
    % if the center and the surrounding cells are not empty:
    %   continue
    \State $skip \gets false$
    \For{\textbf{every} $neighbor\_cell$\textbf{ in a }$avoidance\_radius$\textbf{ away from }$center\_cell$}
        \If {alreadyVisited($visited\_location$, $neighbor\_cell$)}
            \State $skip \gets true$
            \State \textbf{break}
        \EndIf
    \EndFor
    \If {$skip == true$}
        \State \textbf{continue}
    \EndIf
    \For{\textbf{every} $neighbor\_cell$\textbf{ in a }$empty\_radius$\textbf{ away from }$center\_cell$}
        \If {getMapValue($visited\_location$) $\neq$ $0$}
            \State $skip \gets true$
            \State \textbf{break}
        \EndIf
    \EndFor
    \If {$skip == true$}
        \State \textbf{continue}
    \EndIf

    \State $cell\_sum \gets \text{sum(all cells within } window\_size/2 \text{ from } center\_cell \text{)}$

	\State $potential\_candidates\text{.append(}center\_cell\text{)}$
\EndFor

\State $candidate \gets \text{sorted(}potential\_candidates\text{)} $
\State $candidate \gets  potential\_candidates\text{.pop()} $
\While{$\textbf{not } \text{reachableByAStar(} robot\_loc, candidate\text{)}$}
    \State $candidate \gets  potential\_candidates\text{.pop()} $
    \State $best\_loc=candidate$
\EndWhile

\State $candidate  \gets \text{convert\_row\_col\_to\_coord}best\_loc, RESOLUTION, map\text{)} $

\State \textbf{return} $candidate$

\EndProcedure
\end{algorithmic}
\end{algorithm}


</pre><p><span class="markdown-pseudocode" id="goal-1"></span> <script type="text/javascript"> var code = document.getElementById("read-1").textContent; var parentEl = document.getElementById("goal-1"); var options = { lineNumber: true }; pseudocode.render(code, parentEl, options); </script></p><ul><li>Inputs:<ul><li>map: The current occupancy grid<li>window_size: Width of the sliding window used to generate candidate points<li>stride_length: Row much to shift the sliding window with each iteration<li>visited_locations: Grid with same size as map representing the locations we have been to<li>robot_loc: Currently location of the robot<li>avoidance_radius: Radius around candidate waypoint that should not contain walls<li>empty_radius: Radius around candidate waypoint that should be empty<li>RESOLUTION: How many meters per cell</ul><li>Outputs:<ul><li>candidate: The best potential waypoint to go to next</ul></ul><h3 id="analysis-of-your-algorithms-exploration-performance"><span class="mr-2">Analysis of your algorithm’s exploration performance</span><a href="#analysis-of-your-algorithms-exploration-performance" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h3></h3><p>The algorithm has managed full coverage in all provided maps. This algorithm is far from perfect, periodically getting stuck (although it is able to correct itself), and periodically choosing waypoints outside of the map. The algorithm can struggle to come up with waypoints in a reasonable amount of time (typically 20 seconds) due to the need to run A* after a potential candidate is selected.</p><p>The algorithm tended to get the robot stuck in one area, ensuring that every cell in the immediate area. This behavior causes the exploration process to take a long time in the maze map if it selects a point on the other side of a wall potentially causing long travel times.</p><h4 id="did-it-result-in-full-coverage-of-the-environment-provide-a-screenshot-from-rviz"><span class="mr-2">Did it result in full coverage of the environment (provide a screenshot from rviz)?</span><a href="#did-it-result-in-full-coverage-of-the-environment-provide-a-screenshot-from-rviz" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h4></h4><div style="width:100%;"> <img loading="lazy" style="width:33%" data-src="/assets/img/exploring-robot/randomdots.png" alt="Random Dots Map" data-proofer-ignore> <img loading="lazy" style="width:33%" data-src="/assets/img/exploring-robot/TheOffice.png" alt="The Office Map" data-proofer-ignore> <img loading="lazy" style="width:33%" data-src="/assets/img/exploring-robot/maze.png" alt="The Maze Map" data-proofer-ignore></div><figure id="img-1" style="text-align:center"><figcaption><p><strong>Figure 1:</strong> Random Dots Map, The Office Map, and The Maze Map</p></figcaption></figure><p>This algorithm resulted in full exploration of the robot’s environment with a reasonable success rate. The many dots map was the first map that the robot completed, it completed the map in around 20 minutes. Euclidean distance in this map is an accurate way to approximate path distance since the map isn’t divided into rooms, making it an ideal scenario for this algorithm. The office map saw completion times of around 22 minutes. This was largely due to the euclidean distance heuristic that had the robot fully explore each room before moving on. This algorithm struggled with the maze file since it had a habit of setting waypoint on the other side of a wall making it drive back and forth around the entire map, making little but steady progress.</p><h4 id="provide-suggestions-on-how-your-waypoint-allocation-algorithm-could-be-improved"><span class="mr-2">Provide suggestions on how your waypoint allocation algorithm could be improved.</span><a href="#provide-suggestions-on-how-your-waypoint-allocation-algorithm-could-be-improved" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h4></h4><p>The algorithm should use an A* search in order to find the nearest waypoints instead of using euclidean distance. This should make the exploration time faster since it would travel through fully explored areas less often in order to reach new locations. Computationally expensive functions (such as A*) could be rewritten in C++ in order to cut down on computational cost. The robot’s policy for getting unstuck could also be improved. Currently we assume that the robot gets stuck, it is facing a wall and can therefor get unstuck by backing up enough. However, it is not always the case that the wall is in front of the robot, and backing up could end up moving the robot into a wall. Instead, a better policy would be to turn and move away from the closest wall whenever the robot is stuck.</p><h2 id="setup"><span class="mr-2">Setup</span><a href="#setup" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2></h2><ul><li>Download the file (<a href="https://github.com/FarisHijazi/exploring-robot">source code</a>)<li>Unzip the file into the \catkin_ws\src directory<li>In \catkin_ws, run this command to build</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="Copied!"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>catkin_make
</pre></table></code></div></div><h2 id="run"><span class="mr-2">Run</span><a href="#run" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2></h2><ul><li>Open a new terminal<li>In \catkin_ws, run this command to source the bash file</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="Copied!"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">source </span>devel/setup.bash
</pre></table></code></div></div><ul><li>Run this command to launch the ros package</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="Copied!"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>roslaunch src/rob456_project/launch/rob456_project.launch
</pre></table></code></div></div><ul><li>Open a new terminal<li>In \catkin_ws, run this command to source the bash file</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="Copied!"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">source </span>devel/setup.bash
</pre></table></code></div></div><ul><li>Run this command to launch the ros package</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="iconfont icon-code small"></i></span> <span class="code-header-right"><button class="button-copy" aria-label="copy" title-succeed="Copied!"><i class="iconfont icon-copy"></i></button></span></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>roslaunch src/nav_bundle/launch/nav_bundle.launch
</pre></table></code></div></div><ul><li>When the world starts, in rviz, select ‘2D Nav Goal’ and point to a closer cell that has been explored</ul><h2 id="contributors"><span class="mr-2">Contributors</span><a href="#contributors" class="anchor text-muted"><i class="iconfont icon-hashtag"></i></a></h2></h2><ul><li>Lucas Frey - <a href="https://github.com/lcsfrey">lcsfrey</a><li>Faris Hijazi - <a href="https://github.com/FarisHijazi">FarisHijazi</a><li>Daniel Boreham</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="iconfont icon-FolderOpen-1"></i> <a href='/categories/projects/'>Projects</a>, <a href='/categories/robots/'>Robots</a></div><div class="post-tags"> <i class="iconfont icon-tag"></i> <a href="/tags/robots/" class="post-tag no-text-decoration" >robots</a> <a href="/tags/project/" class="post-tag no-text-decoration" >project</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5BProject%5D+Exploring+Robot+-+FarisHijazi&url=https%3A%2F%2Ffarishijazi.github.io%2Fposts%2Fexploring-robot%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="iconfont icon-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5BProject%5D+Exploring+Robot+-+FarisHijazi&u=https%3A%2F%2Ffarishijazi.github.io%2Fposts%2Fexploring-robot%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="iconfont icon-facebook"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ffarishijazi.github.io%2Fposts%2Fexploring-robot%2F&text=%5BProject%5D+Exploring+Robot+-+FarisHijazi" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="iconfont icon-telegram"></i> </a> <i id="copy-link" class="iconfont icon-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/exploring-robot/">[Project] Exploring Robot</a><li><a href="/posts/weekly-logs/">Weekly logs on Notion</a><li><a href="/posts/writing-notes/">How I write my notes [Part 1]</a><li><a href="/posts/linux-vs-freebsd-vs-windows/">Linux vs. FreeBSD vs. Windows</a><li><a href="/posts/tsp/">[Project] Travelling salesman problem</a></ul></div><div id="access-links"><div class="panel-heading">External Links</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="http://slow-science.org/" target="_blank"> <img src="https://img.shields.io/badge/link-slow_science-red.svg" alt="slow-science.org" /> </a><li><a href="https://github.com/FarisHijazi/FarisHijazi.github.io" target="_blank"> <i class="iconfont icon-nihil-github"></i> &nbsp;Github repository for this blog </a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/tsp/"><div class="card-body"> <em class="timeago small" data-ts="1552633200" > 2019-03-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Project] Travelling salesman problem</h3><div class="text-muted small"><p> Description This is a final report for analysis of solving the travelling salesman problem using multiple algorithms and the analysis of those algorithms. Algorithms that Solve TSP Brute Force S...</p></div></div></a></div><div class="card"> <a href="/posts/weekly-logs/"><div class="card-body"> <em class="timeago small" data-ts="1671868800" > 2022-12-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Weekly logs on Notion</h3><div class="text-muted small"><p> For the last 6 years, I have been interested in writing and sharing my thoughts. I have written tens of drafts for articles that I think are useful, worth reading, and interesting to others, or at ...</p></div></div></a></div><div class="card"> <a href="/posts/writing-notes/"><div class="card-body"> <em class="timeago small" data-ts="1659337200" > 2022-08-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How I write my notes [Part 1]</h3><div class="text-muted small"><p> In this post, I will share the tools that I use, my general thoughts about the setup, and an example of how I would go about writing a note. Here are the tools that I use to have an active and pro...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <a href="/posts/linux-vs-freebsd-vs-windows/" class="btn btn-outline-primary" prompt="Newer"><p>Linux vs. FreeBSD vs. Windows</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://farishijazi.github.io/posts/exploring-robot/'; this.page.identifier = '/posts/exploring-robot/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://FarisHijazi.github.io/">Faris Hijazi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme (fork: <a href="https://github.com/nichtshsu/nichtshsu.github.io" target="_blank" rel="noopener">nichtshsu</a>).</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/notion/">notion</a> <a class="post-tag" href="/tags/obsidian/">obsidian</a> <a class="post-tag" href="/tags/freebsd/">freebsd</a> <a class="post-tag" href="/tags/insync/">insync</a> <a class="post-tag" href="/tags/learn/">learn</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/mathpix/">mathpix</a> <a class="post-tag" href="/tags/okular/">okular</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/robots/">robots</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="iconfont icon-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="iconfont icon-folder"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="iconfont icon-tag"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
